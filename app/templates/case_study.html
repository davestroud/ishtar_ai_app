{% extends "base.html" %}

{% block title %}{{ case_study.title }} - Case Study - Ishtar AI{% endblock %}

{% block meta_description %}{{ case_study.challenge[:150] }}...{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <div class="case-study-industry-badge industry-{{ case_study.industry|lower|replace(' ', '-') }}">
            {{ case_study.industry }}
        </div>
        <h1>{{ case_study.title }}</h1>
        <p class="case-study-client-header">Client: {{ case_study.client }}</p>
    </div>
</section>

<section class="case-study-detail-section">
    <div class="container">
        <div class="case-study-content">
            <div class="case-study-section">
                <h2>The Challenge</h2>
                <p>{{ case_study.challenge }}</p>
            </div>

            <div class="case-study-section">
                <h2>Our Solution</h2>
                <p>{{ case_study.solution }}</p>
            </div>

            <div class="case-study-section">
                <h2>Results</h2>
                <p>{{ case_study.results }}</p>

                <div class="case-study-metrics-detailed">
                    {% for key, value in case_study.metrics.items() %}
                    {% if key != 'measurement_period' and key != 'methodology' %}
                    <div class="metric-card">
                        <div class="metric-value-large">{{ value }}</div>
                        <div class="metric-label-large">{{ key|replace('_', ' ')|title }}</div>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>

                {% if case_study.metrics.get('measurement_period') or case_study.metrics.get('methodology') %}
                <div class="metrics-methodology">
                    {% if case_study.metrics.get('measurement_period') %}
                    <p><strong>Measurement Period:</strong> {{ case_study.metrics.measurement_period }}</p>
                    {% endif %}
                    {% if case_study.metrics.get('methodology') %}
                    <p><strong>Methodology:</strong> {{ case_study.metrics.methodology }}</p>
                    {% endif %}
                </div>
                {% endif %}
            </div>

            {% if case_study.get('timeline') %}
            <div class="case-study-section">
                <h2>Time-to-Value</h2>
                <div class="timeline-details">
                    <p><strong>Total Duration:</strong> {{ case_study.timeline.total_duration }}</p>
                    <ul class="timeline-milestones">
                        <li><strong>Kickoff:</strong> {{ case_study.timeline.kickoff }}</li>
                        <li><strong>Architecture Review:</strong> {{ case_study.timeline.architecture_review }}</li>
                        <li><strong>Build Complete:</strong> {{ case_study.timeline.build_complete }}</li>
                        <li><strong>Pilot Deployment:</strong> {{ case_study.timeline.pilot_deployment }}</li>
                        <li><strong>Production Rollout:</strong> {{ case_study.timeline.production_rollout }}</li>
                    </ul>
                </div>
            </div>
            {% endif %}

            {% if case_study.get('architecture') %}
            <div class="case-study-section">
                <h2>Architecture & Scope</h2>
                <div class="architecture-details">
                    {% if case_study.architecture.get('components') %}
                    <h3>Components Deployed</h3>
                    <ul>
                        {% for component in case_study.architecture.components %}
                        <li>{{ component }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    {% if case_study.architecture.get('integrations') %}
                    <h3>Integration Points</h3>
                    <ul>
                        {% for integration in case_study.architecture.integrations %}
                        <li>{{ integration }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    {% if case_study.architecture.get('diagram') %}
                    <div class="architecture-diagram">
                        <img src="{{ case_study.architecture.diagram }}" alt="Architecture Diagram" loading="lazy">
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            {% if case_study.get('risk_controls') %}
            <div class="case-study-section">
                <h2>Risk & Controls Implemented</h2>
                <div class="risk-controls-details">
                    {% if case_study.risk_controls.get('audit_trails') %}
                    <div class="control-item">
                        <h3>Audit Trails</h3>
                        <p>{{ case_study.risk_controls.audit_trails }}</p>
                    </div>
                    {% endif %}
                    {% if case_study.risk_controls.get('permissions') %}
                    <div class="control-item">
                        <h3>Permission Models</h3>
                        <p>{{ case_study.risk_controls.permissions }}</p>
                    </div>
                    {% endif %}
                    {% if case_study.risk_controls.get('evaluation') %}
                    <div class="control-item">
                        <h3>Evaluation Harnesses</h3>
                        <p>{{ case_study.risk_controls.evaluation }}</p>
                    </div>
                    {% endif %}
                    {% if case_study.risk_controls.get('compliance') %}
                    <div class="control-item">
                        <h3>Compliance Controls</h3>
                        <p>{{ case_study.risk_controls.compliance }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            {% if case_study.get('artifacts') %}
            <div class="case-study-section">
                <h2>Artifacts</h2>
                <div class="artifacts-details">
                    {% if case_study.artifacts.get('screenshots') %}
                    <h3>Screenshots</h3>
                    <div class="artifacts-gallery">
                        {% for screenshot in case_study.artifacts.screenshots %}
                        <img src="{{ screenshot }}" alt="Case Study Screenshot" loading="lazy">
                        {% endfor %}
                    </div>
                    {% endif %}
                    {% if case_study.artifacts.get('sample_outputs') %}
                    <h3>Sample Outputs</h3>
                    <p>{{ case_study.artifacts.sample_outputs }}</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            <div class="case-study-cta">
                <h3>Interested in Similar Results?</h3>
                <p>Let's discuss how we can help your organization achieve similar outcomes.</p>
                <div class="cta-buttons">
                    <a href="/demo" class="btn btn-primary">Request a Demo</a>
                    <a href="/contact" class="btn btn-secondary">Contact Us</a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}